<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Instrumentation | ~stesie's musings</title>
<meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://stefansiegl.de/tags/instrumentation/><link crossorigin=anonymous href=/assets/css/stylesheet.0c89971808195fcfba02b00128bb5209e165ff89d76c2f0d04eaefef9e1bd82a.css integrity="sha256-DImXGAgZX8+6ArABKLtSCeFl/4nXbC8NBOrv754b2Co=" rel="preload stylesheet" as=style><link rel=icon href=https://stefansiegl.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://stefansiegl.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://stefansiegl.de/favicon-32x32.png><link rel=apple-touch-icon href=https://stefansiegl.de/apple-touch-icon.png><link rel=mask-icon href=https://stefansiegl.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://stefansiegl.de/tags/instrumentation/feed.xml><link rel=alternate hreflang=en href=https://stefansiegl.de/tags/instrumentation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Instrumentation"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://stefansiegl.de/tags/instrumentation/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Instrumentation"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://stefansiegl.de/ accesskey=h title="~stesie's musings (Alt + H)">~stesie's musings</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://stefansiegl.de/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://stefansiegl.de/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://stefansiegl.de/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://stefansiegl.de/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Instrumentation</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Let's create a Coverage Analyzer, Part 4</h2></header><div class=entry-content><p>This is part four of my journey creating a Java (Line) Coverage Analyzer.
This time around we’ll test the implementation created in part three and look into details what still goes wrong.
One (simplified) example that crashes the current analyzer implementation is this one:
public class Demo3 { public static void main(final String[] argv) { final Stuff stuff = new Stuff( !getBoolean()); bla("value: " + stuff.boolValue()); } public static boolean getBoolean() { return true; } private static void bla(final String greeting) { System....</p></div><footer class=entry-footer>Status: 🌳 Evergreen&nbsp;·&nbsp;Planted:&nbsp;<span title='2025-03-01 18:30:00 +0000 UTC'>Mar 1, 2025</span>&nbsp;·&nbsp;8 min</footer><a class=entry-link aria-label="post link to Let's create a Coverage Analyzer, Part 4" href=https://stefansiegl.de/2025/03/lets-create-a-coverage-analyzer-part-4/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Let's create a Coverage Analyzer, Part 3</h2></header><div class=entry-content><p>This is part three of my journey creating a Java (Line) Coverage Analyzer.
This time around we’ll look into improving the very naive implementation created in part two. That one ended in a VerifyError and the message
Expecting a stackmap frame at branch target 41
So what is this branch target, and the stackmap frame that it’s suddenly missing? To have an easier time inspecting the Byte Code, let’s first create a little CLI version of our instrumentation code....</p></div><footer class=entry-footer>Status: 🌳 Evergreen&nbsp;·&nbsp;Planted:&nbsp;<span title='2025-03-01 11:00:00 +0000 UTC'>Mar 1, 2025</span>&nbsp;·&nbsp;9 min</footer><a class=entry-link aria-label="post link to Let's create a Coverage Analyzer, Part 3" href=https://stefansiegl.de/2025/03/lets-create-a-coverage-analyzer-part-3/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Let's create a Coverage Analyzer, Part 2</h2></header><div class=entry-content><p>This is part two of my journey creating a Java (Line) Coverage Analyzer.
Here we’ll actually implement the Byte Code Instrumentation, as pointed out in the first part.
Since processing the Byte Code itself, i.e. reading the classes, finding the methods, processing line number information, is in itself a huge task, let’s rely on the ASM library for that. After all JaCoCo and Cobertura also rely on that, so this seems to be a valid choice 😂...</p></div><footer class=entry-footer>Status: 🌳 Evergreen&nbsp;·&nbsp;Planted:&nbsp;<span title='2025-02-26 00:00:00 +0000 UTC'>Feb 26, 2025</span>&nbsp;·&nbsp;8 min</footer><a class=entry-link aria-label="post link to Let's create a Coverage Analyzer, Part 2" href=https://stefansiegl.de/2025/02/lets-create-a-coverage-analyzer-part-2/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Let's create a Coverage Analyzer, Part 1</h2></header><div class=entry-content><p>Have you ever wondered what happens when you click on “Run with Coverage” in IntelliJ? Obviously it’s running the tests, but how is it collecting the coverage information?
Let’s create a simple Line Coverage Analyzer in and for Java 🥳
First of all, let’s write a simple example program (see GitHub)
package de.brokenpipe.dojo.undercovered.demo; public class Demo { public static void main(final String[] argv) { final String greeting = "Hello World"; bla(greeting); bla("to the blarg"); } private static void bla(final String greeting) { System....</p></div><footer class=entry-footer>Status: 🌳 Evergreen&nbsp;·&nbsp;Planted:&nbsp;<span title='2025-02-17 00:00:00 +0000 UTC'>Feb 17, 2025</span>&nbsp;·&nbsp;Last tended:&nbsp;<span title='2025-02-26 00:00:00 +0000 UTC'>Feb 26, 2025</span>&nbsp;·&nbsp;6 min</footer><a class=entry-link aria-label="post link to Let's create a Coverage Analyzer, Part 1" href=https://stefansiegl.de/2025/02/lets-create-a-coverage-analyzer-part-1/></a></article></main><footer class=footer><span>© 2025 Stefan Siegl · all content is <a href=https://creativecommons.org/licenses/by-sa/4.0/deed>CC-BY-SA</a> · <a href=https://www.swyx.io/digital-garden-tos#for-visitors>Terms of Service</a></span> ·
<a href=/imprint>Imprint</a> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>
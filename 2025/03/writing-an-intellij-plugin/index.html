<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Writing an IntelliJ Plugin | ~stesie's musings</title>
<meta name=keywords content="Java,IntelliJ,Plugin,Coverage Analyzer,Undercovered"><meta name=description content="In a way, this is the last part of my journey creating a Java (Line) Coverage Analyzer.
This article concentrates on creating an IntelliJ plugin, that adapts it to show the results collected by the analyzer created in Let&rsquo;s create a Coverage Analyzer, Part 4.
To get started, check out JetBrains&rsquo; Developing a Plugin article. With recent IntelliJ versions you need to install the Plugin DevKit first, then create a new Project and select the IDE Plugin Generator."><meta name=author content><link rel=canonical href=https://stefansiegl.de/2025/03/writing-an-intellij-plugin/><link crossorigin=anonymous href=/assets/css/stylesheet.0c89971808195fcfba02b00128bb5209e165ff89d76c2f0d04eaefef9e1bd82a.css integrity="sha256-DImXGAgZX8+6ArABKLtSCeFl/4nXbC8NBOrv754b2Co=" rel="preload stylesheet" as=style><link rel=icon href=https://stefansiegl.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://stefansiegl.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://stefansiegl.de/favicon-32x32.png><link rel=apple-touch-icon href=https://stefansiegl.de/apple-touch-icon.png><link rel=mask-icon href=https://stefansiegl.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://stefansiegl.de/2025/03/writing-an-intellij-plugin/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=me href=https://wue.social/@rolf><meta property="og:title" content="Writing an IntelliJ Plugin"><meta property="og:description" content="In a way, this is the last part of my journey creating a Java (Line) Coverage Analyzer.
This article concentrates on creating an IntelliJ plugin, that adapts it to show the results collected by the analyzer created in Let&rsquo;s create a Coverage Analyzer, Part 4.
To get started, check out JetBrains&rsquo; Developing a Plugin article. With recent IntelliJ versions you need to install the Plugin DevKit first, then create a new Project and select the IDE Plugin Generator."><meta property="og:type" content="article"><meta property="og:url" content="https://stefansiegl.de/2025/03/writing-an-intellij-plugin/"><meta property="article:section" content="pages"><meta property="article:published_time" content="2025-03-04T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-04T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Writing an IntelliJ Plugin"><meta name=twitter:description content="In a way, this is the last part of my journey creating a Java (Line) Coverage Analyzer.
This article concentrates on creating an IntelliJ plugin, that adapts it to show the results collected by the analyzer created in Let&rsquo;s create a Coverage Analyzer, Part 4.
To get started, check out JetBrains&rsquo; Developing a Plugin article. With recent IntelliJ versions you need to install the Plugin DevKit first, then create a new Project and select the IDE Plugin Generator."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Pages","item":"https://stefansiegl.de/pages/"},{"@type":"ListItem","position":2,"name":"Writing an IntelliJ Plugin","item":"https://stefansiegl.de/2025/03/writing-an-intellij-plugin/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Writing an IntelliJ Plugin","name":"Writing an IntelliJ Plugin","description":"In a way, this is the last part of my journey creating a Java (Line) Coverage Analyzer.\nThis article concentrates on creating an IntelliJ plugin, that adapts it to show the results collected by the analyzer created in Let\u0026rsquo;s create a Coverage Analyzer, Part 4.\nTo get started, check out JetBrains\u0026rsquo; Developing a Plugin article. With recent IntelliJ versions you need to install the Plugin DevKit first, then create a new Project and select the IDE Plugin Generator.","keywords":["Java","IntelliJ","Plugin","Coverage Analyzer","Undercovered"],"articleBody":"In a way, this is the last part of my journey creating a Java (Line) Coverage Analyzer.\nThis article concentrates on creating an IntelliJ plugin, that adapts it to show the results collected by the analyzer created in Let‚Äôs create a Coverage Analyzer, Part 4.\nTo get started, check out JetBrains‚Äô Developing a Plugin article. With recent IntelliJ versions you need to install the Plugin DevKit first, then create a new Project and select the IDE Plugin Generator.\nThe result is a Plugin scaffold, by default based on Kotlin. Since I don‚Äôt (yet) know about Kotlin I went on adding Java files. In the end it‚Äôs not much anyways. I have next to no experience with Gradle, therefore I also struggled a bit with that one, but found my way through.\nProviding a coverageRunner Extension Effectively the only thing you have to do to provide a custom Java Coverage runner, is creating a class extending JavaCoverageRunner and declaring it in the plugin.xml file.\npublic class UndercoveredRunner extends JavaCoverageRunner { @Override public @NotNull @NonNls String getPresentableName() { return \"Undercover Runner\"; } @Override public @NotNull @NonNls String getId() { return \"undercover\"; } @Override public @NotNull @NonNls String getDataFileExtension() { return \"undercover.json\"; } @Override public boolean isBranchInfoAvailable(final boolean branchCoverage) { return false; } } and\ncom.intellij.modules.platform com.intellij.java com.intellij.modules.coverage Coverage ","wordCount":"697","inLanguage":"en","datePublished":"2025-03-04T00:00:00Z","dateModified":"2025-03-04T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://stefansiegl.de/2025/03/writing-an-intellij-plugin/"},"publisher":{"@type":"Organization","name":"~stesie's musings","logo":{"@type":"ImageObject","url":"https://stefansiegl.de/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://stefansiegl.de/ accesskey=h title="~stesie's musings (Alt + H)">~stesie's musings</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://stefansiegl.de/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://stefansiegl.de/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://stefansiegl.de/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://stefansiegl.de/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Writing an IntelliJ Plugin</h1><div class=post-meta>Status: üå± Seedling&nbsp;¬∑&nbsp;Planted:&nbsp;<span title='2025-03-04 00:00:00 +0000 UTC'>Mar 4, 2025</span>&nbsp;¬∑&nbsp;4 min</div></header><div class=post-content><p>In a way, this is the last part of my journey creating a Java (Line) Coverage Analyzer.</p><p>This article concentrates on creating an IntelliJ plugin, that adapts it to show the results collected by the analyzer created in <a href=https://stefansiegl.de/2025/03/lets-create-a-coverage-analyzer-part-4/>Let&rsquo;s create a Coverage Analyzer, Part 4</a>.</p><p>To get started, check out JetBrains&rsquo; <a href=https://plugins.jetbrains.com/docs/intellij/developing-plugins.html>Developing a Plugin</a> article. With recent IntelliJ versions you need to install the <a href=https://plugins.jetbrains.com/plugin/22851-plugin-devkit>Plugin DevKit</a> first, then create a new Project and select the <em>IDE Plugin</em> Generator.</p><p>The result is a Plugin scaffold, by default based on Kotlin. Since I don&rsquo;t (yet) know about Kotlin I went on adding Java files. In the end it&rsquo;s not much anyways. I have next to no experience with Gradle, therefore I also struggled a bit with that one, but found my way through.</p><h2 id=providing-a-coveragerunner-extension>Providing a coverageRunner Extension<a hidden class=anchor aria-hidden=true href=#providing-a-coveragerunner-extension>#</a></h2><p>Effectively the only thing you have to do to provide a custom Java Coverage runner, is creating a class extending <code>JavaCoverageRunner</code> and declaring it in the <code>plugin.xml</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UndercoveredRunner</span> <span style=color:#66d9ef>extends</span> JavaCoverageRunner {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@NotNull</span> <span style=color:#a6e22e>@NonNls</span> String <span style=color:#a6e22e>getPresentableName</span>() {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Undercover Runner&#34;</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@NotNull</span> <span style=color:#a6e22e>@NonNls</span> String <span style=color:#a6e22e>getId</span>() {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;undercover&#34;</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@NotNull</span> <span style=color:#a6e22e>@NonNls</span> String <span style=color:#a6e22e>getDataFileExtension</span>() {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;undercover.json&#34;</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isBranchInfoAvailable</span>(<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>boolean</span> branchCoverage) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>and</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;idea-plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- Product and plugin compatibility requirements.
</span></span></span><span style=display:flex><span><span style=color:#75715e>           Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;depends&gt;</span>com.intellij.modules.platform<span style=color:#f92672>&lt;/depends&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;depends&gt;</span>com.intellij.java<span style=color:#f92672>&lt;/depends&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;depends&gt;</span>com.intellij.modules.coverage<span style=color:#f92672>&lt;/depends&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;depends&gt;</span>Coverage<span style=color:#f92672>&lt;/depends&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Extension points defined by the plugin.
</span></span></span><span style=display:flex><span><span style=color:#75715e>           Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;extensions</span> <span style=color:#a6e22e>defaultExtensionNs=</span><span style=color:#e6db74>&#34;com.intellij&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;coverageRunner</span> <span style=color:#a6e22e>implementation=</span><span style=color:#e6db74>&#34;de.brokenpipe.dojo.undercovered.plugin.UndercoveredRunner&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/extensions&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/idea-plugin&gt;</span>
</span></span></code></pre></div><p>&mldr; one thing, that really cost me a long time to figure out is the <code>&lt;depends>Coverage&lt;/depends></code> part. Since the other plugins have this package-style name, I was trying it with prefixes first, and also didn&rsquo;t try with a capital letter &ldquo;C&rdquo; first. In the end, close to desperation, I literaly tried the pluginId &mldr; and it worked ü§¶</p><p>To be honest I wasn&rsquo;t aware how much of the IntelliJ ecosystem actually is available as open source software. For example the <a href=https://github.com/JetBrains/intellij-community/blob/master/plugins/coverage/resources/META-INF/plugin.xml>plugin.xml file of the Coverage Plugin</a> can be found on GitHub here (along with the implementation obviously). There&rsquo;s also <a href=https://github.com/JetBrains/intellij-community/blob/master/plugins/coverage/src/com/intellij/coverage/JaCoCoCoverageRunner.java>JaCoCoCoverageRunner.java</a>, which happens to be pretty similar to my implementation üòè</p><p>To get started, just run the <code>runIde</code> Gradle task. First time it takes a while, since it downloads a full IntelliJ installation as dependency, then builds a while and finally starts another IDE instance &mldr; which runs with a Debugger attached to the &ldquo;outer&rdquo; IDE. So you can happily set breakpoints in the &ldquo;outer&rdquo; IDE, which obviously will block the &ldquo;inner&rdquo; one.</p><p>The above couple of lines are already enough, that the Coverage Runner shows up in the settings dialog ü•≥</p><p><img loading=lazy src=/assets/image_1741116607962_0.png alt="Screenshot from IntelliJ coverage settings, showing the &amp;ldquo;Choose coverage runner&amp;rdquo; select with &amp;ldquo;Undercover Runner&amp;rdquo; selected"></p><p>In the end it boils down to reading the JSON file, the analyzer creates, and map it to the class structure that IntelliJ expects (<code>ProjectData</code> & <code>LineData</code> classes):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>	<span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@Nullable</span> ProjectData <span style=color:#a6e22e>loadCoverageData</span>(<span style=color:#a6e22e>@NotNull</span> <span style=color:#66d9ef>final</span> File sessionDataFile,
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>@Nullable</span> <span style=color:#66d9ef>final</span> CoverageSuite baseCoverageSuite) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> CoverageDataDTO coverageData <span style=color:#f92672>=</span> readCoverageFile(sessionDataFile);
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> processCoverageData(coverageData);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#a6e22e>@NotNull</span> ProjectData <span style=color:#a6e22e>processCoverageData</span>(<span style=color:#66d9ef>final</span> CoverageDataDTO coverageData) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> ProjectData data <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ProjectData();
</span></span><span style=display:flex><span>		coverageData.<span style=color:#a6e22e>getClasses</span>().<span style=color:#a6e22e>forEach</span>(clazz <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>var</span> maxLine <span style=color:#f92672>=</span> clazz.<span style=color:#a6e22e>getLines</span>().<span style=color:#a6e22e>stream</span>().<span style=color:#a6e22e>mapToInt</span>(LineCoverageDataDTO::getLine).<span style=color:#a6e22e>max</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> (maxLine.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>var</span> cd <span style=color:#f92672>=</span> data.<span style=color:#a6e22e>getOrCreateClassData</span>(convertInternalClassName(clazz.<span style=color:#a6e22e>getClassName</span>()));
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>final</span> LineData<span style=color:#f92672>[]</span> lines <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LineData<span style=color:#f92672>[</span>maxLine.<span style=color:#a6e22e>getAsInt</span>() <span style=color:#f92672>+</span> 1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			clazz.<span style=color:#a6e22e>getLines</span>().<span style=color:#a6e22e>forEach</span>(line <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>				lines<span style=color:#f92672>[</span>line.<span style=color:#a6e22e>getLine</span>()<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LineData(line.<span style=color:#a6e22e>getLine</span>(), line.<span style=color:#a6e22e>getMethodSignature</span>());
</span></span><span style=display:flex><span>				lines<span style=color:#f92672>[</span>line.<span style=color:#a6e22e>getLine</span>()<span style=color:#f92672>]</span>.<span style=color:#a6e22e>setHits</span>(line.<span style=color:#a6e22e>getHitCount</span>());
</span></span><span style=display:flex><span>			});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			cd.<span style=color:#a6e22e>setLines</span>(lines);
</span></span><span style=display:flex><span>		});
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> data;
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><h2 id=configuring-the-build>Configuring the build<a hidden class=anchor aria-hidden=true href=#configuring-the-build>#</a></h2><p>The <code>depends</code> declarations in the <code>plugin.xml</code> file have a runtime effect only (after all they seem to control the ClassLoader IntelliJ creates for the plugin). To build properly, you also need to declare the same plugins in <code>build.gradle.kts</code> file like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>intellij {
</span></span><span style=display:flex><span>    version.<span style=color:#66d9ef>set</span>(<span style=color:#e6db74>&#34;2024.1.7&#34;</span>)
</span></span><span style=display:flex><span>    type.<span style=color:#66d9ef>set</span>(<span style=color:#e6db74>&#34;IC&#34;</span>) <span style=color:#75715e>// Target IDE Platform
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    plugins.<span style=color:#66d9ef>set</span>(listOf(<span style=color:#e6db74>&#34;java&#34;</span>, <span style=color:#e6db74>&#34;Coverage&#34;</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>&mldr; in that file I also declared further dependencies (Jackson for JSON parsing, and also I relied on Lombok)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>dependencies {
</span></span><span style=display:flex><span>    compileOnly(<span style=color:#e6db74>&#34;org.projectlombok:lombok:1.18.36&#34;</span>)
</span></span><span style=display:flex><span>    annotationProcessor(<span style=color:#e6db74>&#34;org.projectlombok:lombok:1.18.36&#34;</span>)
</span></span><span style=display:flex><span>    implementation(<span style=color:#e6db74>&#34;com.fasterxml.jackson.core:jackson-databind:2.15.2&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I packaged the agent.jar in <code>src/main/resources/undercovered-agent.jar</code>, hence need to copy it to the build assets. Turns out the Gradle way to do that is</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>tasks.register&lt;Copy&gt;(<span style=color:#e6db74>&#34;copyAgentJar&#34;</span>) {
</span></span><span style=display:flex><span>    from(<span style=color:#e6db74>&#34;src/main/resources/undercovered-agent.jar&#34;</span>)
</span></span><span style=display:flex><span>    into(layout.buildDirectory.dir(<span style=color:#e6db74>&#34;resources/main&#34;</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tasks.named(<span style=color:#e6db74>&#34;instrumentedJar&#34;</span>) {
</span></span><span style=display:flex><span>    dependsOn(<span style=color:#e6db74>&#34;copyAgentJar&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tasks.named(<span style=color:#e6db74>&#34;jar&#34;</span>) {
</span></span><span style=display:flex><span>    dependsOn(<span style=color:#e6db74>&#34;copyAgentJar&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And that&rsquo;s already all that is to it.</p><div class="admonition note"><div class=admonition-icon>‚ÑπÔ∏è</div><div class=admonition-body><p>The full source code of the plugin is available from <a href=https://github.com/stesie/undercovered-plugin>stesie/undercovered-plugin GitHub repository</a>. Feel free to try it out & play around with it.</p><p>But please refrain from using it in production üòÖ</p></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://stefansiegl.de/tags/java/>Java</a></li><li><a href=https://stefansiegl.de/tags/intellij/>IntelliJ</a></li><li><a href=https://stefansiegl.de/tags/plugin/>Plugin</a></li><li><a href=https://stefansiegl.de/tags/coverage-analyzer/>Coverage Analyzer</a></li><li><a href=https://stefansiegl.de/tags/undercovered/>Undercovered</a></li></ul></footer></article></main><footer class=footer><span>¬© 2025 Stefan Siegl ¬∑ all content is <a href=https://creativecommons.org/licenses/by-sa/4.0/deed>CC-BY-SA</a> ¬∑ <a href=https://www.swyx.io/digital-garden-tos#for-visitors>Terms of Service</a></span> ¬∑
<a href=/imprint>Imprint</a> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>
<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pages | stesie's musings</title>
<meta name=keywords content><meta name=description content="Pages - stesie's musings"><meta name=author content="Stefan Siegl"><link rel=canonical href=https://stesie.github.io/pages/><link crossorigin=anonymous href=/assets/css/stylesheet.eaf1c0e3f8327b0eecb58a6cafac5ca1bc09ab794ba654be960d9aa6b1cdd1c7.css integrity="sha256-6vHA4/gyew7stYpsr6xcobwJq3lLplS+lg2aprHN0cc=" rel="preload stylesheet" as=style><link rel=icon href=https://stesie.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://stesie.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://stesie.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://stesie.github.io/apple-touch-icon.png><link rel=mask-icon href=https://stesie.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://stesie.github.io/pages/feed.xml><link rel=alternate hreflang=en href=https://stesie.github.io/pages/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Pages"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://stesie.github.io/pages/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Pages"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Pages","item":"https://stesie.github.io/pages/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://stesie.github.io/ accesskey=h title="stesie's musings (Alt + H)">stesie's musings</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://stesie.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://stesie.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://stesie.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://stesie.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Pages</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Heroku custom platform repo for V8Js</h2></header><div class=entry-content><p>Yesterday @dzuelke poked me to migrate the old PHP buildpack adjusted for V8Js to the new custom platform repo infrastructure. The advantage is that the custom platform repo only contains the v8js extension packages now, the rest (i.e. Apache and PHP itself) are pulled from the lang-php bucket, aka normal php buildpack.
As I already had that on my TODO list, I just immediately did that :-)
… so here’s the new heroku-v8js Github repository that has all the build formulas....</p></div><footer class=entry-footer><span title='2016-03-28 00:00:00 +0000 UTC'>March 28, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to Heroku custom platform repo for V8Js" href=https://stesie.github.io/2016/03/heroku-custom-platform-repo/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>V8Js improved fluent setter performance</h2></header><div class=entry-content><p>After fixing V8Js’ behaviour of not retaining the object identity of passed back V8Object instances (i.e. always re-wrapping them, instead of re-using the already existing object) I tried how V8Js handles fluent setters (those that return $this at the end).
Unfortunately they weren’t handled well, that is V8Js always wrapped the same object again and again (in both directions). Functionality-wise that doesn’t make a big difference since the underlying object is the same, hence further setters can still be called....</p></div><footer class=entry-footer><span title='2016-03-25 00:00:00 +0000 UTC'>March 25, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to V8Js improved fluent setter performance" href=https://stesie.github.io/2016/03/fluent-setters/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>V8PromiseFactory</h2></header><div class=entry-content><p>V8 has support for ES6 Promises and they make a clean JS-side API. So why not create promises from PHP, (later on) being resolved by PHP?
V8Js doesn’t allow direct creation of JS objects from PHP-code, a little JS-side helper needs to be used. One possibility is this:
class V8PromiseFactory { private $v8; public function __construct(V8Js $v8) { $this->v8 = $v8; } public function __invoke($executor) { $trampoline = $this->v8->executeString( '(function(executor) { return new Promise(executor); })'); return $trampoline($executor); } } … it can be used to construct an API method that returns a Promise like this:...</p></div><footer class=entry-footer><span title='2016-03-25 00:00:00 +0000 UTC'>March 25, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to V8PromiseFactory" href=https://stesie.github.io/2016/03/v8promisefactory/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>thoughts on phpspec</h2></header><div class=entry-content><p>As I’ve recently been poked whether I had used phpspec and I had to negate, today I finally gave it a try (doing the Bowling Kata) …
phpspec has some class and method templating built into it. If for example a test fails due to a missing function, it asks whether it should create one (that does nothing at all). This is nice but IMHO breaks the workflow a bit as you have to move the cursor to the terminal window and answer the question....</p></div><footer class=entry-footer><span title='2016-03-24 00:00:00 +0000 UTC'>March 24, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to thoughts on phpspec" href=https://stesie.github.io/2016/03/thoughts-on-phpspec/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>phpspec screencast</h2></header><div class=entry-content><p>After @sD_Tobi recently poked me whether I knew phpspec, … and initially I had no idea except for having heard of it … I found this excellent screencast on laracasts.com to get a first impression. It’s just 17 minutes and he’s really enthusiastic about it :-)</p></div><footer class=entry-footer><span title='2016-03-23 00:00:00 +0000 UTC'>March 23, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to phpspec screencast" href=https://stesie.github.io/2016/03/hello-phpspec/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Happy & Lucky Numbers</h2></header><div class=entry-content><p>The other day I paired with the guys from @solutiondrive and @niklas_heer, we had a fun evening learing about happy numbers, shared PhpStorm knowledge, tried Codeception etc. Actually we didn’t even finish the “Happy Numbers” Kata, since we only wrote the classifying routine, not the loop generating the output.
On my way home I kept googling and also found out about Lucky Numbers. Lucky numbers are natural numbers, recursively filtered by a sieve that eliminates numbers based on their position (where the second number tells the elimination offsets)....</p></div><footer class=entry-footer><span title='2016-03-10 00:00:00 +0000 UTC'>March 10, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to Happy & Lucky Numbers" href=https://stesie.github.io/2016/03/happy-and-lucky-numbers/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>funny Math.random behaviour</h2></header><div class=entry-content><p>Playing around with V8’s custom startup snapshots I noticed some funny behaviour regarding Math.random.
It is clear that if you call Math.random() within the custom startup code the generated random numbers are baked into the snapshot and then not so random anymore. If you call Math.random() at runtime, without custom startup code, it just behaves as expected: it generates random numbers. However if you have custom startup code, calling Math.random() early on startup, it correctly generates random numbers during startup but it breaks runtime random number generation causing weird error messages like...</p></div><footer class=entry-footer><span title='2016-03-05 00:00:00 +0000 UTC'>March 5, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to funny Math.random behaviour" href=https://stesie.github.io/2016/03/math-random-fun/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>20x performance boost with V8Js snapshots</h2></header><div class=entry-content><p>Recently @virgofx filed an issue on V8Js whether (startup) performance of V8Js could be increased. He wants to do server-side React rendering and noticed that V8 itself needs roughly 50ms to initialize and then further 60ms to process React & ReactServer javascript code. Way too much for server side rendering (on more or less every request).
Up to V8 4.4 you simply could compile it with snapshots and V8Js made use of them....</p></div><footer class=entry-footer><span title='2016-02-29 00:00:00 +0000 UTC'>February 29, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to 20x performance boost with V8Js snapshots" href=https://stesie.github.io/2016/02/snapshot-performance/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>V8Js approaching PHP7</h2></header><div class=entry-content><p>For some weeks now I had the idea that V8Js must be running on PHP7 the day it is officially published. So when I started out porting soon after they published he first release candidate (aka 7.0.0RC1) I felt some pressure, especially after noticing that it really will be a lot of work to do.
The more glad I am to announce today, that V8Js finally compiles fine and passes the whole test suite from the master branch (apart from tiny modifications that became necessary due to PHP 5....</p></div><footer class=entry-footer><span title='2015-10-05 00:00:00 +0000 UTC'>October 5, 2015</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to V8Js approaching PHP7" href=https://stesie.github.io/2015/10/v8js-on-php7/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Two more V8Js releases</h2></header><div class=entry-content><p>Today as well as last Thursday I uploaded two more V8Js releases to PECL, both fixing issues around v8::FunctionTemplate usage that bit me at work.
Those v8::FunctionTemplate objects are used to construct constructor functions (and thus object templates) in V8. The problem with them? They are not object to garbage collection. So if we export a object with a method attached to it from PHP to JS, V8Js at first exports the object (and caches the v8::FunctionTemplate used to construct it; re-using it on subsequent export of the same class)....</p></div><footer class=entry-footer><span title='2015-09-01 00:00:00 +0000 UTC'>September 1, 2015</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Stefan Siegl</footer><a class=entry-link aria-label="post link to Two more V8Js releases" href=https://stesie.github.io/2015/09/two-more-releases/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://stesie.github.io/pages/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://stesie.github.io/pages/page/3/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>© 2025 Stefan Siegl · all content is <a href=https://creativecommons.org/licenses/by-sa/4.0/deed>CC-BY-SA</a></span> ·
<a href=/imprint>Imprint</a> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>